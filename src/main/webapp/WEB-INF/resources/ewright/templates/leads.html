<div style="padding: 0px 5px 5px;">

    <div class="page-header" style="margin-top: 0px">
        <h1><i class="fa  fa-arrow-right"></i> Inbound Enquiries
            <small>- Email, live chat and phone calls.</small>
        </h1>
    </div>


    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
        <div class="panel panel-default" ng-repeat="(key,value) in getLeadsByContact()">


            <div class="panel-heading" role="tab" id="headingOne">
                <h4 class="panel-title">
                    <a role="button" data-toggle="collapse" data-parent="#accordion" href="#{{$index}}"
                       aria-expanded="true" aria-controls="  {{$index}}"  ng-click="model.selectedMessage = null">
                        {{(value[0].assignedContact.email) ? value[0].assignedContact.email : "No contact assigned"}}
                         &nbsp; - &nbsp;
                        {{value.length}} Pending Enquiries.
                    </a>
                </h4>
            </div>

            <div id="{{$index}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
                <ul class="list-group">
                    <li class="list-group-item" ng-repeat="lead in value" ng-style="{'background-color':(model.selectedMessage == lead ?'#D3EDED':'#FFFFFF')}"

                        ng-click="
                         model.selectedMessage.showDetails = false;
                         model.selectedMessage.showContact = false;
                         model.selectedMessage = lead;
                         lead.showDetails = true;">
                        <div style="display : block; width : 100%; overflow : auto;">
                            <div style="float : left; clear : none; width : 5%; margin-top: 8px">

                                <label class="col-sm-2 control-label pull-left"> #{{lead.id}}</label>
                            </div>
                            <div style="float : left; clear : none; width : 70%;">

                                <div style="display : block; width : 100%; overflow : hidden;" class="form-horizontal">
                                    <div style="float : left; clear : none; width : 33%;">
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Name</label>

                                            <div class="col-sm-10">
                                                <p class="form-control-static ">{{lead.name}}</p>
                                            </div>
                                        </div>

                                    </div>
                                    <div style="float : left; clear : none; width : 33%;">

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Email</label>

                                            <div class="col-sm-10">
                                                <p class="form-control-static ">{{lead.email}}</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div style="float : left; clear : none; width : 33%;">

                                        <div class="form-group">
                                            <label class="col-sm-5 control-label">PhoneNumber</label>

                                            <div class="col-sm-6">
                                                <p class="form-control-static">{{lead.phoneNumber}}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </div>
                            <div style="float : left; clear : none; width : 25%;" class="">
                                <button class="btn pull-right btn-default" ng-click="open(lead)">
                                    <i class="fa fa-envelope-o"></i>
                                </button>

                                <button class="btn btn-default pull-right" type="submit">
                                    <i class="fa fa-hand-o-right"></i>
                                </button>

                                <button ng-show="lead.assignedContact != null" class="btn btn-success pull-right"
                                        type="submit" ng-click="lead.showContact = !lead.showContact">
                                    <i class="fa fa-user"></i>
                                </button>

                                <button ng-show="lead.assignedContact == null" class="btn btn-warning pull-right"
                                        type="submit" ng-click="lead.showContact = !lead.showContact">
                                    <i class="fa fa-user-plus"></i>
                                </button>

                                <button class="btn btn-default pull-right" type="submit"
                                        ng-click="lead.showDetails = !lead.showDetails">
                                    <i ng-if="!lead.showDetails" class="fa fa-angle-down"></i>
                                    <i ng-if="lead.showDetails" class="fa fa-angle-up"></i>
                                </button>
                            </div>


                        </div>
                        <div ng-if="lead.showDetails">
                            <textarea class="form-control" ng-model="lead.details" rows="8" readonly></textarea>
                        </div>

                        <div ng-if="lead.showContact">
                            <button class="btn btn-success" type="button" ng-click="open(true)"></button>
                            <textarea class="form-control" ng-model="lead.assignedContact.firstName" rows="8"
                                      readonly></textarea>
                        </div>


                    </li>

                </ul>

            </div>

        </div>

    </div>


</div>